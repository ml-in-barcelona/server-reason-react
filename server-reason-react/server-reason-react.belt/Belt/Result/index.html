<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Result (server-reason-react.server-reason-react.belt.Belt.Result)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../';
let search_urls = ['../../../sherlodoc_db.js','../../../../sherlodoc.js'];
</script><script src="../../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">Package index</a> &#x00BB; <a href="../../../index.html">server-reason-react</a> &#x00BB; Library <code>server-reason-react.belt</code> &#x00BB; <a href="../index.html">Belt</a> &#x00BB; Result</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Belt.Result</span></code></h1><p><a href="#"><code>Belt.Result</code></a></p><p>Utilities for result data type.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../../index.html">server-reason-react</a><ul><li><a href="../../../get-started.html">Get started</a></li><li><a href="../../../universal-code.html">What does universal code mean</a></li><li><a href="../../../how-to-organise-universal-code.html">How to organise universal code</a></li><li><a href="../../../browser_ppx.html">Exclude client code from the native build</a></li><li><a href="../../../externals-melange-attributes.html">Externals and melange attributes</a></li><li><a href="../../../ssr-and-hydration.html">Server-side rendering and hydration</a></li><li>Library <code>server-reason-react.base32</code><ul><li><a href="../../../server-reason-react.base32/Base32/index.html">Base32</a></li></ul></li><li>Library <code>server-reason-react.belt</code><ul><li><a href="../index.html">Belt</a><ul><li><a href="../Id/index.html">Id</a></li><li><a href="../Array/index.html">Array</a></li><li><a href="../SortArray/index.html">SortArray</a></li><li><a href="../MutableQueue/index.html">MutableQueue</a></li><li><a href="../MutableStack/index.html">MutableStack</a></li><li><a href="../List/index.html">List</a></li><li><a href="../Range/index.html">Range</a></li><li><a href="../Set/index.html">Set</a></li><li><a href="../Map/index.html">Map</a></li><li><a href="../MutableSet/index.html">MutableSet</a></li><li><a href="../MutableMap/index.html">MutableMap</a></li><li><a href="../HashSet/index.html">HashSet</a></li><li><a href="../HashMap/index.html">HashMap</a></li><li><a href="../Option/index.html">Option</a></li><li><a href="#" class="current_unit">Result</a></li><li><a href="../Int/index.html">Int</a></li><li><a href="../Float/index.html">Float</a></li></ul></li></ul></li><li>Library <code>server-reason-react.browser_ppx</code><ul><li><a href="../../../server-reason-react.browser_ppx/Browser_ppx/index.html">Browser_ppx</a></li></ul></li><li>Library <code>server-reason-react.dom</code><ul><li><a href="../../../server-reason-react.dom/Dom/index.html">Dom</a></li></ul></li><li>Library <code>server-reason-react.fetch</code><ul><li><a href="../../../server-reason-react.fetch/Fetch/index.html">Fetch</a></li></ul></li><li>Library <code>server-reason-react.html</code><ul><li><a href="../../../server-reason-react.html/Html/index.html">Html</a></li></ul></li><li>Library <code>server-reason-react.js</code><ul><li><a href="../../../server-reason-react.js/Js/index.html">Js</a></li></ul></li><li>Library <code>server-reason-react.melange_ppx</code><ul><li><a href="../../../server-reason-react.melange_ppx/Melange_native_ppx/index.html">Melange_native_ppx</a></li></ul></li><li>Library <code>server-reason-react.ppx</code><ul><li><a href="../../../server-reason-react.ppx/Server_reason_react_ppx/index.html">Server_reason_react_ppx</a></li></ul></li><li>Library <code>server-reason-react.promise-native</code><ul><li><a href="../../../server-reason-react.promise-native/Promise/index.html">Promise</a></li></ul></li><li>Library <code>server-reason-react.react</code><ul><li><a href="../../../server-reason-react.react/React/index.html">React</a></li><li><a href="../../../server-reason-react.react/ReactEvent/index.html">ReactEvent</a></li><li><a href="../../../server-reason-react.react/ReasonReactRouter/index.html">ReasonReactRouter</a></li></ul></li><li>Library <code>server-reason-react.reactDom</code><ul><li><a href="../../../server-reason-react.reactDom/ReactDOM/index.html">ReactDOM</a></li><li><a href="../../../server-reason-react.reactDom/ReactDOMStyle/index.html">ReactDOMStyle</a></li><li><a href="../../../server-reason-react.reactDom/ReactServerDOM/index.html">ReactServerDOM</a></li></ul></li><li>Library <code>server-reason-react.runtime</code><ul><li><a href="../../../server-reason-react.runtime/Runtime/index.html">Runtime</a></li></ul></li><li>Library <code>server-reason-react.url_native</code><ul><li><a href="../../../server-reason-react.url_native/URL/index.html">URL</a></li></ul></li><li>Library <code>server-reason-react.webapi</code><ul><li><a href="../../../server-reason-react.webapi/Webapi/index.html">Webapi</a></li></ul></li><li>Library <code>server-reason-react.xxhash</code><ul><li><a href="../../../server-reason-react.xxhash/XXH64/index.html">XXH64</a></li></ul></li><li><a href="../../../src/index.html">Sources</a></li></ul></li></ul></nav></div><div class="odoc-content"><p><code>Belt.Result</code> is a data type with two variants: <code>Ok</code> and <code>Error</code>. Each of these variants can contain data, and those two pieces of data need not have the same data type. <code>Belt.Result</code> is useful when you need to not only determine whether some data is valid or not (use <code>Belt.Option</code> for that), but also keep information about the invalid data.</p><p>In the examples, we presume the existence of two variables:</p><pre class="language-ocaml"><code>  let good = Ok 42
  let bad = Error &quot;Invalid data&quot;</code></pre><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) t</span></span><span> = </span></code><ol><li id="type-t.Ok" class="def variant constructor anchored"><a href="#type-t.Ok" class="anchor"></a><code><span>| </span><span><span class="constructor">Ok</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></li><li id="type-t.Error" class="def variant constructor anchored"><a href="#type-t.Error" class="anchor"></a><code><span>| </span><span><span class="constructor">Error</span> <span class="keyword">of</span> <span class="type-var">'b</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-getExn"><a href="#val-getExn" class="anchor"></a><code><span><span class="keyword">val</span> getExn : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>getExn res</code></p><p>when <code>res</code> is <code>Ok n</code>, returns <code>n</code> when <code>res</code> is <code>Error m</code>, <b>raise</b> an exception</p><pre class="language-ocaml"><code>  getExn good = 42;;
  getExn bad (* raises exception *)</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mapWithDefaultU"><a href="#val-mapWithDefaultU" class="anchor"></a><code><span><span class="keyword">val</span> mapWithDefaultU : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mapWithDefault"><a href="#val-mapWithDefault" class="anchor"></a><code><span><span class="keyword">val</span> mapWithDefault : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>mapWithDefault res default f</code></p><p>When <code>res</code> is <code>Ok n</code>, returns <code>f n</code>, otherwise <code>default</code>.</p><pre class="language-ocaml"><code>  mapWithDefault good 0 (fun x -&gt; x / 2) = 21 mapWithDefault bad 0 (fun x -&gt; x / 2) = 0</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mapU"><a href="#val-mapU" class="anchor"></a><code><span><span class="keyword">val</span> mapU : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>map res f</code></p><p>When <code>res</code> is <code>Ok n</code>, returns <code>Ok (f n)</code>. Otherwise returns <code>res</code> unchanged. Function <code>f</code> takes a value of the same type as <code>n</code> and returns an ordinary value.</p><pre class="language-ocaml"><code>  let f x = sqrt (float_of_int x)
  map (Ok 64) f = Ok 8.0
  map (Error &quot;Invalid data&quot;) f = Error &quot;Invalid data&quot;</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flatMapU"><a href="#val-flatMapU" class="anchor"></a><code><span><span class="keyword">val</span> flatMapU : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flatMap"><a href="#val-flatMap" class="anchor"></a><code><span><span class="keyword">val</span> flatMap : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>flatMap res f</code></p><p>When <code>res</code> is <code>Ok n</code>, returns <code>f n</code>. Otherwise, returns <code>res</code> unchanged. Function <code>f</code> takes a value of the same type as <code>n</code> and returns a <code>Belt.Result</code>.</p><pre class="language-ocaml"><code>  let recip x =
    if x != 0.0
    then
      Ok (1.0 /. x)
    else
      Error &quot;Divide by zero&quot;

      flatMap (Ok 2.0) recip = Ok 0.5
      flatMap (Ok 0.0) recip = Error &quot;Divide by zero&quot;
      flatMap (Error &quot;Already bad&quot;) recip = Error &quot;Already bad&quot;</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-getWithDefault"><a href="#val-getWithDefault" class="anchor"></a><code><span><span class="keyword">val</span> getWithDefault : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>getWithDefault res defaultValue</code></p><p>if <code>res</code> is <code>Ok n</code>, returns <code>n</code>, otherwise <code>default</code></p><pre class="language-ocaml"><code>  getWithDefault (Ok 42) 0 = 42 getWithDefault (Error &quot;Invalid Data&quot;) = 0</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-isOk"><a href="#val-isOk" class="anchor"></a><code><span><span class="keyword">val</span> isOk : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>isOk res</code></p><p>Returns <code>true</code> if <code>res</code> is of the form <code>Ok n</code>, <code>false</code> if it is the <code>Error e</code> variant.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-isError"><a href="#val-isError" class="anchor"></a><code><span><span class="keyword">val</span> isError : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>isError res</code></p><p>Returns <code>true</code> if <code>res</code> is of the form <code>Error e</code>, <code>false</code> if it is the <code>Ok n</code> variant.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-eqU"><a href="#val-eqU" class="anchor"></a><code><span><span class="keyword">val</span> eqU : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'d</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-eq"><a href="#val-eq" class="anchor"></a><code><span><span class="keyword">val</span> eq : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'d</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>eq res1 res2 f</code></p><p>Determine if two <code>Belt.Result</code> variables are equal with respect to an equality function. If <code>res1</code> and <code>res2</code> are of the form <code>Ok n</code> and <code>Ok m</code>, return the result of <code>f n m</code>. If one of <code>res1</code> and <code>res2</code> are of the form <code>Error e</code>, return false If both <code>res1</code> and <code>res2</code> are of the form <code>Error e</code>, return true</p><pre class="language-ocaml"><code>  let good1 = Ok 42
  let good2 = Ok 32
  let bad1 = Error &quot;invalid&quot;
  let bad2 = Error &quot;really invalid&quot;

  let mod10equal a b =
    a mod 10 == b mod 10

  eq good1 good2 mod10equal = true
  eq good1 bad1 mod10equal = false
  eq bad2 good2 mod10equal = false
  eq bad1 bad2 mod10equal = true</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cmpU"><a href="#val-cmpU" class="anchor"></a><code><span><span class="keyword">val</span> cmpU : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'d</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cmp"><a href="#val-cmp" class="anchor"></a><code><span><span class="keyword">val</span> cmp : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'d</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>cmp res1 res2 f</code></p><p>Compare two <code>Belt.Result</code> variables with respect to a comparison function. The comparison function returns -1 if the first variable is &quot;less than&quot; the second, 0 if the two variables are equal, and 1 if the first is &quot;greater than&quot; the second.</p><p>If <code>res1</code> and <code>res2</code> are of the form <code>Ok n</code> and <code>Ok m</code>, return the result of <code>f n m</code>. If <code>res1</code> is of the form <code>Error e</code> and <code>res2</code> of the form <code>Ok n</code>, return -1 (nothing is less than something) If <code>res1</code> is of the form <code>Ok n</code> and <code>res2</code> of the form <code>Error e</code>, return 1 (something is greater than nothing) If both <code>res1</code> and <code>res2</code> are of the form <code>Error e</code>, return 0 (equal)</p><pre class="language-ocaml"><code>  let good1 = Ok 59
  let good2 = Ok 37
  let bad1 = Error &quot;invalid&quot;
  let bad2 = Error &quot;really invalid&quot;

  let mod10cmp a b =
    Pervasives.compare (a mod 10) (b mod 10) cmp (Ok 39) (Ok 57) mod10cmp
    = 1 cmp (Ok 57) (Ok 39) mod10cmp
    = -1 cmp (Ok 39) (Error &quot;y&quot;) mod10cmp
    = 1 cmp (Error &quot;x&quot;) (Ok 57) mod10cmp
    = -1 cmp (Error &quot;x&quot;) (Error &quot;y&quot;) mod10cmp
    = 0</code></pre></div></div></div></body></html>
