<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>get-started (server-reason-react.get-started)</title><meta charset="utf-8"/><link rel="stylesheet" href="../odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../';
let search_urls = ['sherlodoc_db.js','../sherlodoc.js'];
</script><script src="../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="../index.html">Package index</a> &#x00BB; <a href="index.html">server-reason-react</a> &#x00BB; Get started</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1 id="get-started"><a href="#get-started" class="anchor"></a>Get started</h1><p>This page explains the different modules available in <code>server-reason-react</code> and how to use them.</p><p>It assumes a minimum understanding of:</p><ul><li><a href="https://reasonml.github.io/docs/en/what-and-why">Reason</a></li><li><a href="reasonml.github.io/reason-react/">reason-react</a> (the react.js bindings)</li><li><a href="https://melange.re/v3.0.0/what-is-melange.html">Melange</a> (the JavaScript compiler)</li><li><a href="https://dune.readthedocs.io/en/stable">dune</a> (the build system)</li></ul></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#installation">Installation</a><ul><li><a href="#install-opam">From opam's registry (recommended)</a></li><li><a href="#install-source">From source</a></li></ul></li><li><a href="#setup">Setup</a></li><li><a href="#usage">Usage</a></li><li><a href="#server-side-rendering">Server-side Rendering</a><ul><li><a href="#rendertostring/rendertostaticmarkup">renderToString/renderToStaticMarkup</a></li><li><a href="#rendertostream">renderToStream</a></li></ul></li><li><a href="#react-server-components">React Server Components</a></li></ul></nav><nav class="odoc-toc odoc-global-toc"><ul><li><a href="index.html">server-reason-react</a><ul><li><a href="#" class="current_unit">Get started</a></li><li><a href="universal-code.html">What does universal code mean</a></li><li><a href="how-to-organise-universal-code.html">How to organise universal code</a></li><li><a href="browser_ppx.html">Exclude client code from the native build</a></li><li><a href="externals-melange-attributes.html">Externals and melange attributes</a></li><li><a href="ssr-and-hydration.html">Server-side rendering and hydration</a></li><li>Library <code>server-reason-react.base32</code><ul><li><a href="server-reason-react.base32/Base32/index.html">Base32</a></li></ul></li><li>Library <code>server-reason-react.belt</code><ul><li><a href="server-reason-react.belt/Belt/index.html">Belt</a></li></ul></li><li>Library <code>server-reason-react.browser_ppx</code><ul><li><a href="server-reason-react.browser_ppx/Browser_ppx/index.html">Browser_ppx</a></li></ul></li><li>Library <code>server-reason-react.dom</code><ul><li><a href="server-reason-react.dom/Dom/index.html">Dom</a></li></ul></li><li>Library <code>server-reason-react.expand-styles-attribute</code><ul><li><a href="server-reason-react.expand-styles-attribute/Expand_styles_attribute/index.html">Expand_styles_attribute</a></li></ul></li><li>Library <code>server-reason-react.fetch</code><ul><li><a href="server-reason-react.fetch/Fetch/index.html">Fetch</a></li></ul></li><li>Library <code>server-reason-react.html</code><ul><li><a href="server-reason-react.html/Html/index.html">Html</a></li></ul></li><li>Library <code>server-reason-react.js</code><ul><li><a href="server-reason-react.js/Js/index.html">Js</a></li></ul></li><li>Library <code>server-reason-react.melange_ppx</code><ul><li><a href="server-reason-react.melange_ppx/Melange_native_ppx/index.html">Melange_native_ppx</a></li></ul></li><li>Library <code>server-reason-react.ppx</code><ul><li><a href="server-reason-react.ppx/Server_reason_react_ppx/index.html">Server_reason_react_ppx</a></li></ul></li><li>Library <code>server-reason-react.promise-native</code><ul><li><a href="server-reason-react.promise-native/Promise/index.html">Promise</a></li></ul></li><li>Library <code>server-reason-react.react</code><ul><li><a href="server-reason-react.react/React/index.html">React</a></li><li><a href="server-reason-react.react/ReactEvent/index.html">ReactEvent</a></li><li><a href="server-reason-react.react/ReasonReactRouter/index.html">ReasonReactRouter</a></li></ul></li><li>Library <code>server-reason-react.reactDom</code><ul><li><a href="server-reason-react.reactDom/ReactDOM/index.html">ReactDOM</a></li><li><a href="server-reason-react.reactDom/ReactDOMStyle/index.html">ReactDOMStyle</a></li><li><a href="server-reason-react.reactDom/ReactServerDOM/index.html">ReactServerDOM</a></li></ul></li><li>Library <code>server-reason-react.runtime</code><ul><li><a href="server-reason-react.runtime/Runtime/index.html">Runtime</a></li></ul></li><li>Library <code>server-reason-react.url_native</code><ul><li><a href="server-reason-react.url_native/URL/index.html">URL</a></li></ul></li><li>Library <code>server-reason-react.webapi</code><ul><li><a href="server-reason-react.webapi/Webapi/index.html">Webapi</a></li></ul></li><li>Library <code>server-reason-react.xxhash</code><ul><li><a href="server-reason-react.xxhash/XXH64/index.html">XXH64</a></li></ul></li><li><a href="src/index.html">Sources</a></li></ul></li></ul></nav></div><div class="odoc-content"><h2 id="installation"><a href="#installation" class="anchor"></a>Installation</h2><h3 id="install-opam"><a href="#install-opam" class="anchor"></a>From opam's registry (recommended)</h3><pre class="language-ocaml"><code>opam install server-reason-react</code></pre><h3 id="install-source"><a href="#install-source" class="anchor"></a>From source</h3><p>To use the development version, install via opam pinning:</p><pre class="language-ocaml"><code>opam pin server-reason-react.dev &quot;https://github.com/ml-in-barcelona/server-reason-react.git#main&quot; -y</code></pre><h2 id="setup"><a href="#setup" class="anchor"></a>Setup</h2><p>Add to your dune file:</p><pre class="language-ocaml"><code>(libraries (server-reason-react.react server-reason-react.reactDom))
(preprocess (pps server-reason-react.ppx))</code></pre><h2 id="usage"><a href="#usage" class="anchor"></a>Usage</h2><p><code>server-reason-react</code> provides <a href="server-reason-react.react/React/index.html"><code>React</code></a> and <a href="server-reason-react.reactDom/ReactDOM/index.html"><code>ReactDOM</code></a> modules with the same interface as <code>reason-react</code>, including JSX transformation via <code>server-reason-react.ppx</code>. Components follow the standard <code>reason-react</code> API as explained in their <a href="https://reasonml.github.io/reason-react/docs/en/components">official documentation</a>.</p><p>Here's a simple component:</p><pre class="language-ocaml"><code>module Greetings = {
  [@react.component]
  let make = (~name) =&gt; {
    &lt;div&gt;
      &lt;h1&gt; {React.string(&quot;Hello &quot; ++ name)} &lt;/h1&gt;
    &lt;/div&gt;
  };
};</code></pre><p>Components are functions that return a <code>React.element</code> and are annotated with <code>@react.component</code>. By convention, they are named `make`. When used in JSX, they can be written without the `make` prefix, using just the module name.</p><p>Here's a longer component with state:</p><pre class="language-ocaml"><code>module Counter = {
  [@react.component]
  let make = (~name) =&gt; {
    let (count, setCount) = React.useState(() =&gt; 0);
    &lt;div&gt;
      &lt;p&gt; {React.string(name ++ &quot; &quot; ++ Int.to_string(count))} &lt;/p&gt;
      &lt;button onClick={_ =&gt; setCount(_ =&gt; count + 1)}&gt;
        {React.string(&quot;Click me&quot;)}
      &lt;/button&gt;
    &lt;/div&gt;
  };
};</code></pre><p>Hooks like <code>React.useState</code> or <code>React.useEffect</code> are available but are no-ops when running on the server. Since components don't re-render on the server. Hooks like <code>React.useCallback</code> and <code>React.useMemo</code> have no memoization and return values just once.</p><h2 id="server-side-rendering"><a href="#server-side-rendering" class="anchor"></a>Server-side Rendering</h2><p>The main difference from <code>reason-react</code> is the ability to render on the server using <a href="server-reason-react.reactDom/ReactDOM/index.html"><code>ReactDOM</code></a>. The module provides three rendering methods:</p><h3 id="rendertostring/rendertostaticmarkup"><a href="#rendertostring/rendertostaticmarkup" class="anchor"></a>renderToString/renderToStaticMarkup</h3><p><code>ReactDOM.renderToString</code> renders a React tree as a HTML string:</p><pre class="language-ocaml"><code>let html = ReactDOM.renderToString(&lt;App /&gt;);</code></pre><p><code>ReactDOM.renderToStaticMarkup</code> renders a non-interactive React tree (can't be hydrated on the client):</p><pre class="language-ocaml"><code>let html = ReactDOM.renderToStaticMarkup(&lt;App /&gt;);</code></pre><h3 id="rendertostream"><a href="#rendertostream" class="anchor"></a>renderToStream</h3><p><code>ReactDOM.renderToStream</code> renders a React tree as a <a href="https://ocsigen.org/lwt/3.1.0/api/Lwt_stream">Lwt_stream</a> of type <code>Lwt_stream.t(string)</code>:</p><pre class="language-ocaml"><code>let%lwt (stream, abort) = ReactDOM.renderToStream(&lt;App /&gt;);
stream |&gt; Lwt_stream.iter_s((chunk =&gt; {
  let%lwt () = Dream.write(response_stream, chunk);
  Dream.flush(response_stream);
}));</code></pre><p>Note: <code>Lwt</code> is required. See <a href="https://github.com/ml-in-barcelona/server-reason-react/issues/205">this issue</a> for details.</p><h2 id="react-server-components"><a href="#react-server-components" class="anchor"></a>React Server Components</h2><p>React Server Components (RSC) is an architecture that allows you to render React components exclusively on the server, using server-side code (such as query the database or access the filesystem). It also, allows to differentiate server and client components (those components that require interactivity). Making sure that server ones are stripped from the JavaScript bundle sent to the client, while client components are loaded only when needed.</p><p>There's a entire area of improvements that RSC bring to the table, such as decreasing the bundle size by lazy loading client components, remove data fetching with useEffect hooks (by passing just promises), streaming the result of the server rendering of the page or stream the RSC payload, removes state by lifting it to the URL, to name the most notable ones.</p><p>This library supports it, but many pieces are being polished right now, check the <a href="https://github.com/ml-in-barcelona/server-reason-react/tree/main/demo">demo folder</a> for more information or the <a href="https://github.com/ml-in-barcelona/server-reason-react/issues/204">umbrella issue</a>.</p></div></body></html>
